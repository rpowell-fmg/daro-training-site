{
  "hash": "22a0d471c30b949883002f1f289fd5f7",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Labelled Data\"\norder: 9\ntitle-slide-attributes:\n    data-background-gradient: linear-gradient(to top right, {{< brand color background >}}, {{< brand color pastelpink >}}, {{< brand color fmorange >}}, {{< brand color tangerine >}})\n\nformat: \n  revealjs:\n    margin: .15\n    quarto-required: \">= 1.6.0\"\n    width: 1600\n    height: 900\n    slide-number: \"c\"\n    css: ../styles.css\n    code-copy: true\n    echo: true\n    code-overflow: scroll\n---\n\n\n\n# Labels\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n:::\n\n\n\n## labelled \n\n:::: {.column}\n::: {.incremental}\n- Functions and methods to handle and manipulate labelled data\n    - Variable labels\n    - Value labels\n    - Missing values\n- Create data dictionaries\n\n:::\n::::\n\n::: {.column}\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](images/labelled.png){fig-align='center' width=70%}\n:::\n:::\n\n\n:::\n\n::: {.footnote}\nSee [https://larmarange.github.io/labelled/](https://larmarange.github.io/labelled/) for more information\n:::\n\n## Cleaning Approaches\n\n<br>\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](images/approach-a-1.png){fig-align='center'}\n:::\n:::\n\n\n\n## Cleaning Approaches\n\n<br>\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](images/approach-a-2.png){fig-align='center'}\n:::\n:::\n\n\n\n. . .\n\n<br>\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](images/approach-b-1.png){fig-align='center'}\n:::\n:::\n\n\n\n## Cleaning Approaches\n\n<br>\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](images/approach-a-2.png){fig-align='center'}\n:::\n:::\n\n\n\n<br>\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](images/approach-b-2.png){fig-align='center'}\n:::\n:::\n\n\n\n# Variable names and labels\n\n\n\n::: {.cell}\n\n:::\n\n\n\n## Rename variables\n\n`rename()` function from **dplyr** package allows us to update variable names one at a time in the format `old_var` = `new_var`\n\n::: {.column}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnames(spss_ex)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"CaseId\"                     \n [2] \"LastConnectionDate\"         \n [3] \"LastConnectionStartTime\"    \n [4] \"ConnectionDurationInSeconds\"\n [5] \"ConnectionDurationInMinutes\"\n [6] \"LastQuestionFilled\"         \n [7] \"NumberOfConnections\"        \n [8] \"resDisposition\"             \n [9] \"TotalDurationSec\"           \n[10] \"Device\"                     \n[11] \"DeviceOS\"                   \n[12] \"DeviceVersion\"              \n[13] \"DeviceBrowser\"              \n[14] \"DeviceBrowserVersion\"       \n[15] \"S1\"                         \n[16] \"TT1\"                        \n[17] \"AGE\"                        \n[18] \"Q1\"                         \n[19] \"Q1B\"                        \n[20] \"Q2\"                         \n[21] \"Q2B\"                        \n[22] \"Q3\"                         \n[23] \"Q4\"                         \n[24] \"Q5\"                         \n[25] \"TT2\"                        \n[26] \"GENDER\"                     \n[27] \"Q6\"                         \n[28] \"Q7C1\"                       \n[29] \"Q7C2\"                       \n[30] \"Q7C3\"                       \n[31] \"Q7C4\"                       \n[32] \"Q7C5\"                       \n[33] \"Q7C6\"                       \n[34] \"Q7_VN\"                      \n[35] \"RACE\"                       \n[36] \"Q8\"                         \n[37] \"QS\"                         \n[38] \"QSB\"                        \n[39] \"TT3\"                        \n[40] \"PROPENSITY\"                 \n[41] \"EM7\"                        \n[42] \"EM7B\"                       \n[43] \"EM8C1\"                      \n[44] \"EM8C2\"                      \n[45] \"EM8C3\"                      \n[46] \"EM8C4\"                      \n[47] \"EM8C5\"                      \n[48] \"EM8C6\"                      \n[49] \"EM8C7\"                      \n[50] \"EM8C8\"                      \n[51] \"EM8C9\"                      \n[52] \"EM8C10\"                     \n[53] \"EM8_VN\"                     \n[54] \"EM9\"                        \n[55] \"EM14\"                       \n[56] \"Q34\"                        \n[57] \"Q36\"                        \n```\n\n\n:::\n:::\n\n\n:::\n\n:::: {.column}\n::: {.fragment}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\nspss_ex_rename<-spss_ex %>% \n  rename(UNIQUEID = CaseId)\n\nnames(spss_ex_rename)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"UNIQUEID\"                   \n [2] \"LastConnectionDate\"         \n [3] \"LastConnectionStartTime\"    \n [4] \"ConnectionDurationInSeconds\"\n [5] \"ConnectionDurationInMinutes\"\n [6] \"LastQuestionFilled\"         \n [7] \"NumberOfConnections\"        \n [8] \"resDisposition\"             \n [9] \"TotalDurationSec\"           \n[10] \"Device\"                     \n[11] \"DeviceOS\"                   \n[12] \"DeviceVersion\"              \n[13] \"DeviceBrowser\"              \n[14] \"DeviceBrowserVersion\"       \n[15] \"S1\"                         \n[16] \"TT1\"                        \n[17] \"AGE\"                        \n[18] \"Q1\"                         \n[19] \"Q1B\"                        \n[20] \"Q2\"                         \n[21] \"Q2B\"                        \n[22] \"Q3\"                         \n[23] \"Q4\"                         \n[24] \"Q5\"                         \n[25] \"TT2\"                        \n[26] \"GENDER\"                     \n[27] \"Q6\"                         \n[28] \"Q7C1\"                       \n[29] \"Q7C2\"                       \n[30] \"Q7C3\"                       \n[31] \"Q7C4\"                       \n[32] \"Q7C5\"                       \n[33] \"Q7C6\"                       \n[34] \"Q7_VN\"                      \n[35] \"RACE\"                       \n[36] \"Q8\"                         \n[37] \"QS\"                         \n[38] \"QSB\"                        \n[39] \"TT3\"                        \n[40] \"PROPENSITY\"                 \n[41] \"EM7\"                        \n[42] \"EM7B\"                       \n[43] \"EM8C1\"                      \n[44] \"EM8C2\"                      \n[45] \"EM8C3\"                      \n[46] \"EM8C4\"                      \n[47] \"EM8C5\"                      \n[48] \"EM8C6\"                      \n[49] \"EM8C7\"                      \n[50] \"EM8C8\"                      \n[51] \"EM8C9\"                      \n[52] \"EM8C10\"                     \n[53] \"EM8_VN\"                     \n[54] \"EM9\"                        \n[55] \"EM14\"                       \n[56] \"Q34\"                        \n[57] \"Q36\"                        \n```\n\n\n:::\n:::\n\n\n:::\n::::\n\n## Rename Multiple variables\n\n::: {.column}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnames(spss_ex)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"CaseId\"                     \n [2] \"LastConnectionDate\"         \n [3] \"LastConnectionStartTime\"    \n [4] \"ConnectionDurationInSeconds\"\n [5] \"ConnectionDurationInMinutes\"\n [6] \"LastQuestionFilled\"         \n [7] \"NumberOfConnections\"        \n [8] \"resDisposition\"             \n [9] \"TotalDurationSec\"           \n[10] \"Device\"                     \n[11] \"DeviceOS\"                   \n[12] \"DeviceVersion\"              \n[13] \"DeviceBrowser\"              \n[14] \"DeviceBrowserVersion\"       \n[15] \"S1\"                         \n[16] \"TT1\"                        \n[17] \"AGE\"                        \n[18] \"Q1\"                         \n[19] \"Q1B\"                        \n[20] \"Q2\"                         \n[21] \"Q2B\"                        \n[22] \"Q3\"                         \n[23] \"Q4\"                         \n[24] \"Q5\"                         \n[25] \"TT2\"                        \n[26] \"GENDER\"                     \n[27] \"Q6\"                         \n[28] \"Q7C1\"                       \n[29] \"Q7C2\"                       \n[30] \"Q7C3\"                       \n[31] \"Q7C4\"                       \n[32] \"Q7C5\"                       \n[33] \"Q7C6\"                       \n[34] \"Q7_VN\"                      \n[35] \"RACE\"                       \n[36] \"Q8\"                         \n[37] \"QS\"                         \n[38] \"QSB\"                        \n[39] \"TT3\"                        \n[40] \"PROPENSITY\"                 \n[41] \"EM7\"                        \n[42] \"EM7B\"                       \n[43] \"EM8C1\"                      \n[44] \"EM8C2\"                      \n[45] \"EM8C3\"                      \n[46] \"EM8C4\"                      \n[47] \"EM8C5\"                      \n[48] \"EM8C6\"                      \n[49] \"EM8C7\"                      \n[50] \"EM8C8\"                      \n[51] \"EM8C9\"                      \n[52] \"EM8C10\"                     \n[53] \"EM8_VN\"                     \n[54] \"EM9\"                        \n[55] \"EM14\"                       \n[56] \"Q34\"                        \n[57] \"Q36\"                        \n```\n\n\n:::\n:::\n\n\n:::\n\n::: {.column}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2-4\"}\nspss_ex_rename<-spss_ex %>% \n  rename(UNIQUEID = CaseId,\n         LDate = LastConnectionDate,\n         Consent = Q1)\n\nnames(spss_ex_rename)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"UNIQUEID\"                   \n [2] \"LDate\"                      \n [3] \"LastConnectionStartTime\"    \n [4] \"ConnectionDurationInSeconds\"\n [5] \"ConnectionDurationInMinutes\"\n [6] \"LastQuestionFilled\"         \n [7] \"NumberOfConnections\"        \n [8] \"resDisposition\"             \n [9] \"TotalDurationSec\"           \n[10] \"Device\"                     \n[11] \"DeviceOS\"                   \n[12] \"DeviceVersion\"              \n[13] \"DeviceBrowser\"              \n[14] \"DeviceBrowserVersion\"       \n[15] \"S1\"                         \n[16] \"TT1\"                        \n[17] \"AGE\"                        \n[18] \"Consent\"                    \n[19] \"Q1B\"                        \n[20] \"Q2\"                         \n[21] \"Q2B\"                        \n[22] \"Q3\"                         \n[23] \"Q4\"                         \n[24] \"Q5\"                         \n[25] \"TT2\"                        \n[26] \"GENDER\"                     \n[27] \"Q6\"                         \n[28] \"Q7C1\"                       \n[29] \"Q7C2\"                       \n[30] \"Q7C3\"                       \n[31] \"Q7C4\"                       \n[32] \"Q7C5\"                       \n[33] \"Q7C6\"                       \n[34] \"Q7_VN\"                      \n[35] \"RACE\"                       \n[36] \"Q8\"                         \n[37] \"QS\"                         \n[38] \"QSB\"                        \n[39] \"TT3\"                        \n[40] \"PROPENSITY\"                 \n[41] \"EM7\"                        \n[42] \"EM7B\"                       \n[43] \"EM8C1\"                      \n[44] \"EM8C2\"                      \n[45] \"EM8C3\"                      \n[46] \"EM8C4\"                      \n[47] \"EM8C5\"                      \n[48] \"EM8C6\"                      \n[49] \"EM8C7\"                      \n[50] \"EM8C8\"                      \n[51] \"EM8C9\"                      \n[52] \"EM8C10\"                     \n[53] \"EM8_VN\"                     \n[54] \"EM9\"                        \n[55] \"EM14\"                       \n[56] \"Q34\"                        \n[57] \"Q36\"                        \n```\n\n\n:::\n:::\n\n\n:::\n\n## Rename Multiple variables - `select()`\n\n::: {.column}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nspss_ex %>% \n  select(CaseId,\n         LastConnectionDate,\n         Q1,\n         everything()) %>% \n  names()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"CaseId\"                     \n [2] \"LastConnectionDate\"         \n [3] \"Q1\"                         \n [4] \"LastConnectionStartTime\"    \n [5] \"ConnectionDurationInSeconds\"\n [6] \"ConnectionDurationInMinutes\"\n [7] \"LastQuestionFilled\"         \n [8] \"NumberOfConnections\"        \n [9] \"resDisposition\"             \n[10] \"TotalDurationSec\"           \n[11] \"Device\"                     \n[12] \"DeviceOS\"                   \n[13] \"DeviceVersion\"              \n[14] \"DeviceBrowser\"              \n[15] \"DeviceBrowserVersion\"       \n[16] \"S1\"                         \n[17] \"TT1\"                        \n[18] \"AGE\"                        \n[19] \"Q1B\"                        \n[20] \"Q2\"                         \n[21] \"Q2B\"                        \n[22] \"Q3\"                         \n[23] \"Q4\"                         \n[24] \"Q5\"                         \n[25] \"TT2\"                        \n[26] \"GENDER\"                     \n[27] \"Q6\"                         \n[28] \"Q7C1\"                       \n[29] \"Q7C2\"                       \n[30] \"Q7C3\"                       \n[31] \"Q7C4\"                       \n[32] \"Q7C5\"                       \n[33] \"Q7C6\"                       \n[34] \"Q7_VN\"                      \n[35] \"RACE\"                       \n[36] \"Q8\"                         \n[37] \"QS\"                         \n[38] \"QSB\"                        \n[39] \"TT3\"                        \n[40] \"PROPENSITY\"                 \n[41] \"EM7\"                        \n[42] \"EM7B\"                       \n[43] \"EM8C1\"                      \n[44] \"EM8C2\"                      \n[45] \"EM8C3\"                      \n[46] \"EM8C4\"                      \n[47] \"EM8C5\"                      \n[48] \"EM8C6\"                      \n[49] \"EM8C7\"                      \n[50] \"EM8C8\"                      \n[51] \"EM8C9\"                      \n[52] \"EM8C10\"                     \n[53] \"EM8_VN\"                     \n[54] \"EM9\"                        \n[55] \"EM14\"                       \n[56] \"Q34\"                        \n[57] \"Q36\"                        \n```\n\n\n:::\n:::\n\n\n:::\n\n::: {.column}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2-5\"}\nspss_ex_rename<-spss_ex %>% \n  select(UNIQUEID = CaseId,\n         LDate = LastConnectionDate,\n         Consent = Q1,\n         everything())\n\nnames(spss_ex_rename)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"UNIQUEID\"                   \n [2] \"LDate\"                      \n [3] \"Consent\"                    \n [4] \"LastConnectionStartTime\"    \n [5] \"ConnectionDurationInSeconds\"\n [6] \"ConnectionDurationInMinutes\"\n [7] \"LastQuestionFilled\"         \n [8] \"NumberOfConnections\"        \n [9] \"resDisposition\"             \n[10] \"TotalDurationSec\"           \n[11] \"Device\"                     \n[12] \"DeviceOS\"                   \n[13] \"DeviceVersion\"              \n[14] \"DeviceBrowser\"              \n[15] \"DeviceBrowserVersion\"       \n[16] \"S1\"                         \n[17] \"TT1\"                        \n[18] \"AGE\"                        \n[19] \"Q1B\"                        \n[20] \"Q2\"                         \n[21] \"Q2B\"                        \n[22] \"Q3\"                         \n[23] \"Q4\"                         \n[24] \"Q5\"                         \n[25] \"TT2\"                        \n[26] \"GENDER\"                     \n[27] \"Q6\"                         \n[28] \"Q7C1\"                       \n[29] \"Q7C2\"                       \n[30] \"Q7C3\"                       \n[31] \"Q7C4\"                       \n[32] \"Q7C5\"                       \n[33] \"Q7C6\"                       \n[34] \"Q7_VN\"                      \n[35] \"RACE\"                       \n[36] \"Q8\"                         \n[37] \"QS\"                         \n[38] \"QSB\"                        \n[39] \"TT3\"                        \n[40] \"PROPENSITY\"                 \n[41] \"EM7\"                        \n[42] \"EM7B\"                       \n[43] \"EM8C1\"                      \n[44] \"EM8C2\"                      \n[45] \"EM8C3\"                      \n[46] \"EM8C4\"                      \n[47] \"EM8C5\"                      \n[48] \"EM8C6\"                      \n[49] \"EM8C7\"                      \n[50] \"EM8C8\"                      \n[51] \"EM8C9\"                      \n[52] \"EM8C10\"                     \n[53] \"EM8_VN\"                     \n[54] \"EM9\"                        \n[55] \"EM14\"                       \n[56] \"Q34\"                        \n[57] \"Q36\"                        \n```\n\n\n:::\n:::\n\n\n:::\n\n## Rename Multiple Variables - All at once\n\n`rename_with()` allows us to do this across all variables (or a subset of variables)\n\n. . .\n\n**Important Notes for Quality**\n\n::: {.incremental}\n- Make this change to a new dataset so you can compare and make sure the variable names were assigned correctly\n- Have a dataset with the old and new variable names as columns so you know the changes are aligned (calling this \"metavars\")\n:::\n\n. . .\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"|2|3\"}\ndf %>% \n  rename_with(~ new_varnames, \n              all_of(old_varnames))\n```\n:::\n\n\n\n## rename_with example {.smaller}\n\n::: {.column}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nspss_meta_vars %>% \n  select(varname,new_varname)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 57 × 2\n   varname            new_varname\n   <chr>              <chr>      \n 1 CaseId             CaseId     \n 2 LastConnectionDate LastConnec…\n 3 LastConnectionSta… LastConnec…\n 4 ConnectionDuratio… Connection…\n 5 ConnectionDuratio… Connection…\n 6 LastQuestionFilled LastQuesti…\n 7 NumberOfConnectio… NumberOfCo…\n 8 resDisposition     resDisposi…\n 9 TotalDurationSec   TotalDurat…\n10 Device             Device     \n# ℹ 47 more rows\n```\n\n\n:::\n:::\n\n\n:::\n\n::: {.column}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nspss_meta_vars %>% \n  select(varname,new_varname) %>% \n  filter(str_detect(varname, \"^Q7\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 7 × 2\n  varname new_varname\n  <chr>   <chr>      \n1 Q7C1    Q7_1       \n2 Q7C2    Q7_2       \n3 Q7C3    Q7_3       \n4 Q7C4    Q7_4       \n5 Q7C5    Q7_5       \n6 Q7C6    Q7_6       \n7 Q7_VN   Q7_RF      \n```\n\n\n:::\n:::\n\n\n:::\n\n## rename_with example {.smaller}\n\n::: {.column}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nspss_ex %>% \n  select(starts_with(\"Q7\")) %>% \n  var_label()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n$Q7C1\n[1] \"What is your race? Please select one or more races to indicate the race or races that you consider yourself to be. 1 = White\"\n\n$Q7C2\n[1] \"What is your race? Please select one or more races to indicate the race or races that you consider yourself to be. 2 = Black or African American\"\n\n$Q7C3\n[1] \"What is your race? Please select one or more races to indicate the race or races that you consider yourself to be. 3 = American Indian or Alaska Native\"\n\n$Q7C4\n[1] \"What is your race? Please select one or more races to indicate the race or races that you consider yourself to be. 4 = Asian (e.g., Asian Indian, Chinese, Filipino, Japanese, Korean, Vietnamese)\"\n\n$Q7C5\n[1] \"What is your race? Please select one or more races to indicate the race or races that you consider yourself to be. 5 = Native Hawaiian or other Pacific Islander (e.g., Native Hawaiian, Samoan, Chamorro, Tongan, Fijian, Marshallese)\"\n\n$Q7C6\n[1] \"What is your race? Please select one or more races to indicate the race or races that you consider yourself to be. 6 = Some other race\"\n\n$Q7_VN\nNULL\n```\n\n\n:::\n:::\n\n\n:::\n\n:::: {.column}\n::: {.fragment}\n\n\n::: {.cell output-location='fragment'}\n\n```{.r .cell-code  code-line-numbers=\"|2|3\"}\nspss_ex %>% \n  rename_with(~ spss_meta_vars$new_varname, \n              all_of(spss_meta_vars$varname)) %>% \n  select(starts_with(\"Q7\")) %>% \n  var_label()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n$Q7_1\n[1] \"What is your race? Please select one or more races to indicate the race or races that you consider yourself to be. 1 = White\"\n\n$Q7_2\n[1] \"What is your race? Please select one or more races to indicate the race or races that you consider yourself to be. 2 = Black or African American\"\n\n$Q7_3\n[1] \"What is your race? Please select one or more races to indicate the race or races that you consider yourself to be. 3 = American Indian or Alaska Native\"\n\n$Q7_4\n[1] \"What is your race? Please select one or more races to indicate the race or races that you consider yourself to be. 4 = Asian (e.g., Asian Indian, Chinese, Filipino, Japanese, Korean, Vietnamese)\"\n\n$Q7_5\n[1] \"What is your race? Please select one or more races to indicate the race or races that you consider yourself to be. 5 = Native Hawaiian or other Pacific Islander (e.g., Native Hawaiian, Samoan, Chamorro, Tongan, Fijian, Marshallese)\"\n\n$Q7_6\n[1] \"What is your race? Please select one or more races to indicate the race or races that you consider yourself to be. 6 = Some other race\"\n\n$Q7_RF\nNULL\n```\n\n\n:::\n:::\n\n\n:::\n::::\n\n## Relabel Variables\n\n`var_label()` function from **labelled** package allows us view labels and set labels\n\n:::: {.column}\n::: {.fragment}\nView for a single variable\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvar_label(spss_ex$Q2)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"Have you ever been in the Military, are you in a college Reserve Officers’ Training Corps (ROTC) program or one of the Service academies, or have you been accepted to and are waiting to begin any of these programs?\"\n```\n\n\n:::\n:::\n\n\n:::\n::::\n\n:::: {.column}\n::: {.fragment}\nSet for a single varible\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvar_label(spss_ex$Q2) <- \"Q2: Prior military service\"\nvar_label(spss_ex$Q2)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"Q2: Prior military service\"\n```\n\n\n:::\n:::\n\n\n:::\n::::\n\n# {background-gradient=\"radial-gradient(#FFA219, #FFFFFF, #FFFFFF)\"}\n\n::: {.tip}\n⚠️<b>Warning!</b> <br><br> \nUsing `var_label()` will change the label on the same dataset! <br>USE WITH CAUTION!\n:::\n\n## Relabel Multiple variables {.smaller}\n\n::: {.column}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvar_label(spss_ex$Q2)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"Q2: Prior military service\"\n```\n\n\n:::\n\n```{.r .cell-code}\nvar_label(spss_ex$QS)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"What state do you live in?\"\n```\n\n\n:::\n:::\n\n\n:::\n\n:::: {.column}\n::: {.fragment}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2-3\"}\nspss_ex_newlabel<-spss_ex %>% \n  set_variable_labels(Q2 = \"Q2: Ever been in military\",\n                      QS = \"QS: State\")\n```\n:::\n\n\n:::\n::: {.fragment}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvar_label(spss_ex_newlabel$Q2)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"Q2: Ever been in military\"\n```\n\n\n:::\n\n```{.r .cell-code}\nvar_label(spss_ex_newlabel$QS)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"QS: State\"\n```\n\n\n:::\n:::\n\n\n:::\n::::\n\n## Relabel Multiple Variables - All at once\n\n\n\n::: {.cell}\n\n:::\n\n\n\n**Important Notes for Quality**\n\n::: {.incremental}\n- Make this change to a new dataset so you can compare and make sure the variable labels were assigned correctly\n- Have a dataset with the varible name and labels as columns so you know the changes are aligned (calling this \"metavars\")\n:::\n\n. . .\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nspss_meta_vars %>% \n  select(varname, new_label)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 57 × 2\n   varname                     new_label                        \n   <chr>                       <chr>                            \n 1 CaseId                      Case ID                          \n 2 LastConnectionDate          Last connection date             \n 3 LastConnectionStartTime     Start time of last connection    \n 4 ConnectionDurationInSeconds Duration of connection in seconds\n 5 ConnectionDurationInMinutes Duration of connection in minutes\n 6 LastQuestionFilled          Last question filled             \n 7 NumberOfConnections         Number of connections            \n 8 resDisposition              Disposition                      \n 9 TotalDurationSec            Total Duration (sec.)            \n10 Device                      Device                           \n# ℹ 47 more rows\n```\n\n\n:::\n:::\n\n\n\n## Relabel example {.smaller}\n\n\n\n::: {.cell}\n\n:::\n\n\n\n::: {.column}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nspss_meta_vars %>% \n  select(varname,new_label) %>% \n  filter(str_detect(varname,\"^Q7\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 7 × 2\n  varname new_label                               \n  <chr>   <chr>                                   \n1 Q7C1    Q7_1: Race - White                      \n2 Q7C2    Q7_2: Race - Black                      \n3 Q7C3    Q7_3: Race - American Indian or Alaska …\n4 Q7C4    Q7_4: Race - Asian                      \n5 Q7C5    Q7_5: Race - Native Hawaiian or other P…\n6 Q7C6    Q7_6: Race - Other                      \n7 Q7_VN   Q7_RF: Race - Refused                   \n```\n\n\n:::\n:::\n\n\n:::\n\n::: {.column}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"|2|3\"}\nspss_ex %>% \n  select(all_of(spss_meta_vars$varname)) %>% \n  set_variable_labels(.labels=spss_meta_vars$new_label) %>% \n  select(starts_with(\"Q7\")) %>% \n  var_label()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n$Q7C1\n[1] \"Q7_1: Race - White\"\n\n$Q7C2\n[1] \"Q7_2: Race - Black\"\n\n$Q7C3\n[1] \"Q7_3: Race - American Indian or Alaska Native\"\n\n$Q7C4\n[1] \"Q7_4: Race - Asian\"\n\n$Q7C5\n[1] \"Q7_5: Race - Native Hawaiian or other Pacific Islander\"\n\n$Q7C6\n[1] \"Q7_6: Race - Other\"\n\n$Q7_VN\n[1] \"Q7_RF: Race - Refused\"\n```\n\n\n:::\n:::\n\n\n:::\n\n## Relabel example - incorrect sorting {.smaller}\n\n::: {.column}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nspss_meta_vars2 <- spss_meta_vars %>% \n  arrange(varname)\n\nspss_meta_vars %>% select(varname, new_label) %>% head()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 × 2\n  varname                     new_label           \n  <chr>                       <chr>               \n1 CaseId                      Case ID             \n2 LastConnectionDate          Last connection date\n3 LastConnectionStartTime     Start time of last …\n4 ConnectionDurationInSeconds Duration of connect…\n5 ConnectionDurationInMinutes Duration of connect…\n6 LastQuestionFilled          Last question filled\n```\n\n\n:::\n\n```{.r .cell-code}\nspss_meta_vars2 %>% select(varname, new_label) %>% head()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 × 2\n  varname                     new_label           \n  <chr>                       <chr>               \n1 AGE                         AGE: Derived Variab…\n2 CaseId                      Case ID             \n3 ConnectionDurationInMinutes Duration of connect…\n4 ConnectionDurationInSeconds Duration of connect…\n5 Device                      Device              \n6 DeviceBrowser               Device Browser      \n```\n\n\n:::\n:::\n\n\n:::\n\n:::: {.column}\n::: {.fragment}\n\n\n::: {.cell output-location='fragment'}\n\n```{.r .cell-code  code-line-numbers=\"2|3\"}\nspss_ex %>% \n  select(all_of(spss_meta_vars2$varname)) %>% \n  set_variable_labels(.labels=spss_meta_vars$new_label) %>% \n  select(starts_with(\"Q7\")) %>% \n  var_label()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n$Q7C1\n[1] \"EM7: Highest Education\"\n\n$Q7C2\n[1] \"EM7B: Derived Education Variable\"\n\n$Q7C3\n[1] \"EM8_1: Employment - Full time\"\n\n$Q7C4\n[1] \"EM8_2: Employment - Part time\"\n\n$Q7C5\n[1] \"EM8_3: Employment - Self Employed\"\n\n$Q7C6\n[1] \"EM8_4: Employment - Student Full Time\"\n\n$Q7_VN\n[1] \"EM8_5: Employment - Student Part Time\"\n```\n\n\n:::\n:::\n\n\n:::\n::::\n\n# {background-gradient=\"radial-gradient(#FFA219, #FFFFFF, #FFFFFF)\"}\n\n::: {.tip}\n⚠️<b>Warning!</b> <br><br> \nOrder on your full dataset and the order of your labels needs to be the same! <br><br>Goal is to have a function that does this for you...more to come.\n:::\n\n# Variable values and labels\n\n# Data dictionary/codebook\n\n\n# Your turn: <br>Labelled data {background-gradient=\"linear-gradient(to bottom, #FFFFFF, #FFFFFF, #6BE1CA)\"}\n\n✋ if you have questions or need help\n\n`<svg aria-hidden=\"true\" role=\"img\" viewBox=\"0 0 512 512\" style=\"height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;\"><path d=\"M123.6 391.3c12.9-9.4 29.6-11.8 44.6-6.4c26.5 9.6 56.2 15.1 87.8 15.1c124.7 0 208-80.5 208-160s-83.3-160-208-160S48 160.5 48 240c0 32 12.4 62.8 35.7 89.2c8.6 9.7 12.8 22.5 11.8 35.5c-1.4 18.1-5.7 34.7-11.3 49.4c17-7.9 31.1-16.7 39.4-22.7zM21.2 431.9c1.8-2.7 3.5-5.4 5.1-8.1c10-16.6 19.5-38.4 21.4-62.9C17.7 326.8 0 285.1 0 240C0 125.1 114.6 32 256 32s256 93.1 256 208s-114.6 208-256 208c-37.1 0-72.3-6.4-104.1-17.9c-11.9 8.7-31.3 20.6-54.3 30.6c-15.1 6.6-32.3 12.6-50.1 16.1c-.8 .2-1.6 .3-2.4 .5c-4.4 .8-8.7 1.5-13.2 1.9c-.2 0-.5 .1-.7 .1c-5.1 .5-10.2 .8-15.3 .8c-6.5 0-12.3-3.9-14.8-9.9c-2.5-6-1.1-12.8 3.4-17.4c4.1-4.2 7.8-8.7 11.3-13.5c1.7-2.3 3.3-4.6 4.8-6.9c.1-.2 .2-.3 .3-.5z\"/></svg>`{=html} when you are finished\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"countdown\" id=\"timer_7b6c4778\" data-update-every=\"1\" data-play-sound=\"true\" tabindex=\"0\" style=\"right:0;bottom:0;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">15</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n\n:::\n:::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../site_libs/countdown-0.4.0/countdown.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/countdown-0.4.0/countdown.js\"></script>\n"
      ],
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}